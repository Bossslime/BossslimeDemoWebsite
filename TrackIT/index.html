<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
      <title>TrackIT Finance</title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">

      <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.7.16/vue.min.js" integrity="sha512-Wx8niGbPNCD87mSuF0sBRytwW2+2ZFr7HwVDF8krCb3egstCc4oQfig+/cfg2OHd82KcUlOYxlSDAqdHqK5TCw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.5.0/chart.umd.min.js" integrity="sha512-Y51n9mtKTVBh3Jbx5pZSJNDDMyY+yGe77DGtBPzRlgsf/YLCh13kSZ3JmfHGzYFCmOndraf0sQgfM654b7dJ3w==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

      <style>
          :root {
              --color-red-50: #FEF2F2FF;
              --color-red-50-faded-50: rgba(254, 242, 242, 0.5);
              --color-red-100: #FEE2E2FF;
              --color-red-500: #EF4444FF;
              --color-red-600: #E7000BFF;
              --color-red-700: #C10007FF;

              --color-emerald-50: #ECFDF5FF;
              --color-emerald-50-faded-50: rgba(236, 253, 245, 0.5);
              --color-emerald-100: #D0FAE5FF;
              --color-emerald-200: #A4F4CFFF;
              --color-emerald-500: #10B981FF;
              --color-emerald-600: #009966FF;
              --color-emerald-700: #007A55FF;
              --color-emerald-800: #006045FF;

              --color-slate-50: #F8FAFCFF;
              --color-slate-50-faded-50: rgba(248, 250, 252, 0.25);
              --color-slate-100: #F1F5F9FF;
              --color-slate-200: #E2E8F0FF;
              --color-slate-400: #94A3B8FF;
              --color-slate-500: #62748EFF;
              --color-slate-600: #45556CFF;
              --color-slate-700: #314158FF;
              --color-slate-900: #0F172BFF;

              --color-yellow-50: #FFFBEBFF;
              --color-yellow-600: #CA8A04FF;
              --color-yellow-700: #A16207FF;

              --color-white: #FFFFFFFF;
          }

          html                                                                           { padding: 0 0 25px 0; overflow: auto; }
          body                                                                           { padding: 0; }
          html, body                                                                     { width: 100%; margin: 0; font-family: Arial, sans-serif; background-color: var(--color-slate-50) }
          #vueApp                                                                        { width: 100%; display: flex; flex-direction: column; align-items: center; gap: 15px; }

          /* -------- Navbar -------- */
          .navbar-container                                                              { box-sizing: border-box; position: fixed; top: 0; width: 100%; max-width: 1800px; height: 75px; padding: 0 25px; display: flex; align-items: center; justify-content: space-between; background-color: var(--color-slate-50-faded-50); backdrop-filter: blur(5px); }
          .navbar-container-logo                                                         { height: 55px; width: 167px; background-image: url("assets/logo.png"); background-position: center; background-size: cover; background-repeat: no-repeat; }

          .navbar-button-container                                                       { display: flex; gap: 10px; height: 35px; }

          .navbar-button                                                                 { padding: 5px 10px; border-radius: 10px; gap: 5px; display: flex; align-items: center; user-select: none; }
          .navbar-button[type="border"]                                                  { border: 1px solid var(--color-emerald-600); color: var(--color-emerald-600); }
          .navbar-button[type="fill"]                                                    { color: var(--color-emerald-50); background-color: var(--color-emerald-600); }
          .navbar-button[type="border"]:hover                                            { cursor: pointer; background-color: var(--color-emerald-50-faded-50) !important; transition: background-color .2s ease-in-out; }
          .navbar-button[type="fill"]:hover                                              { cursor: pointer; background-color: var(--color-emerald-500) !important; transition: background-color .2s ease-in-out; }
          .navbar-button svg                                                             { height: 15px; width: 15px; }
          .navbar-button p                                                               { font-size: .9rem; margin: 0; line-height: 1; font-weight: 600; }


          /* -------- Information Section -------- */
          .info-section-container                                                        { box-sizing: border-box; width: 100%; max-width: 1800px; padding: 0 25px; display: flex; margin: 80px auto 0 auto; justify-content: space-evenly; gap: 25px; flex-wrap: wrap; }
          .info-section-card                                                             { border-top: 4px solid var(--color-emerald-500); display: flex; flex-direction: column; justify-content: space-between; background-color: var(--color-white); border-radius: 10px; box-sizing: border-box; width: 400px; max-width: 100%; height: 175px; padding: 25px; box-shadow: 0 0 #0000, 0 0 #0000, 0 0 #0000, 0 0 #0000, 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1) }

          .info-section-card-header-container                                            { display: flex; align-items: center; justify-content: space-between; }
          .info-section-card-header-container p                                          { margin: 0; font-size: 1.1rem; font-weight: 600; color: var(--color-slate-600); line-height: 1; }
          .info-section-card-header-container svg                                        { height: 20px; width: 20px; color: var(--color-slate-600); }

          .info-section-card-data                                                        { font-size: 2.4rem; font-weight: 600; }
          .info-section-card-data[type="positive"]                                       { color: var(--color-emerald-600); }
          .info-section-card-data[type="negative"]                                       { color: var(--color-red-600); }
          .info-section-card-data[type="neutral"]                                        { color: var(--color-slate-600); }


          /* -------- Charts Section -------- */
          .charts-section-container                                                      { box-sizing: border-box; width: 100%; max-width: 1800px; padding: 0 25px; display: flex; margin: 0 auto; justify-content: space-evenly; gap: 25px; flex-wrap: wrap; }
          .charts-section-card                                                           { border-top: 4px solid var(--color-emerald-600); display: flex; flex-direction: column; align-items: center; justify-content: space-between; background-color: var(--color-white); border-radius: 10px; box-sizing: border-box; width: 800px; max-width: 100%; height: 400px; padding: 25px; box-shadow: 0 0 #0000, 0 0 #0000, 0 0 #0000, 0 0 #0000, 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1); }

          .charts-header                                                                 { width: 100%; font-size: 1.3rem; font-weight: 600; color: var(--color-slate-600); margin: 0 0 25px 0; }

          .chart-body                                                                    { width: 100%; height: calc(100% - 49px); }
          .chart-body[type="range"]                                                      { display: flex; flex-direction: column; gap: 25px; overflow-y: auto; padding: 0 10px; }
          .chart-body canvas                                                             { width: 100% !important; height: 100% !important; }

          .chart-body-range-container                                                    { display: flex; flex-direction: column; gap: 5px; }
          .chart-body-range-top                                                          { display: flex; align-items: center; justify-content: space-between; }
          .chart-body-range-top-header-container                                         { display: flex; align-items: center; gap: 5px; }
          .chart-body-range-top-header                                                   { margin: 0; font-size: 1rem; line-height: 1; font-weight: 600; color: var(--color-slate-600); }
          .chart-body-range-top-header-tag                                               { font-size: .7rem; font-weight: 600; padding: 2px 5px; border-radius: 10px; }
          .chart-body-range-top-header-tag[type='positive']                              { border: 1px solid var(--color-emerald-600); color: var(--color-emerald-600); }
          .chart-body-range-top-header-tag[type='negative']                              { border: 1px solid var(--color-red-600); color: var(--color-red-600); }
          .chart-body-range-top-header-tag[type='neutral']                               { border: 1px solid var(--color-yellow-600); color: var(--color-yellow-600); }

          .chart-body-range-top-progress                                                 { font-size: .9rem; line-height: 1; height: fit-content; color: var(--color-slate-600); }

          .chart-body-range-container progress                                           { width: 100%; height: 5px; border-radius: 10px; }
          .chart-body-range-container progress[type="positive"]::-webkit-progress-bar    { background-color: var(--color-emerald-50); border-radius: 10px; }
          .chart-body-range-container progress[type="positive"]::-webkit-progress-value  { background-color: var(--color-emerald-600); border-radius: 10px; }
          .chart-body-range-container progress[type="negative"]::-webkit-progress-bar    { background-color: var(--color-red-50); border-radius: 10px; }
          .chart-body-range-container progress[type="negative"]::-webkit-progress-value  { background-color: var(--color-red-600); border-radius: 10px; }
          .chart-body-range-container progress[type="neutral"]::-webkit-progress-bar     { background-color: var(--color-yellow-50); border-radius: 10px; }
          .chart-body-range-container progress[type="neutral"]::-webkit-progress-value   { background-color: var(--color-yellow-600); border-radius: 10px; }

          .chart-body-range-bottom                                                       { display: flex; align-items: center; justify-content: space-between; }
          .chart-body-range-bottom-text                                                  { font-size: .8rem; color: var(--color-slate-600); }


          /* -------- Transactions Section -------- */
          .chart-transactions-container                                                  { border-top: 4px solid var(--color-emerald-700); box-sizing: border-box; width: calc(100% - 50px); max-width: 1750px; gap: 10px; border-radius: 10px; padding: 25px; overflow-y: auto; background-color: var(--color-white); box-shadow: 0 0 #0000, 0 0 #0000, 0 0 #0000, 0 0 #0000, 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1); }

          .chart-transactions-header                                                     { font-size: 1.3rem; font-weight: 600; color: var(--color-slate-600); margin: 0 0 15px 0; }

          .chart-transaction-table-container                                             { overflow-x: auto; box-sizing: border-box; min-width: fit-content; border: 1px solid var(--color-slate-200); border-radius: 10px; }
          .chart-transaction-table-header                                                { width: 100%; height: 45px; display: flex; background-color: var(--color-slate-100); border-radius: 10px 10px 0 0; }
          .chart-transaction-table-header-section                                        { display: flex; gap: 5px; align-items: center; padding: 15px; }
          .chart-transaction-table-header-section[type="date"]                           { width: 20%; min-width: 90px; }
          .chart-transaction-table-header-section[type="date"]:hover                     { cursor: pointer; background-color: var(--color-slate-200); transition: background-color .2s ease-in-out; }
          .chart-transaction-table-header-section[type="name"]                           { width: 30%; min-width: 150px; }
          .chart-transaction-table-header-section[type="name"]:hover                     { cursor: pointer; background-color: var(--color-slate-200); transition: background-color .2s ease-in-out; }
          .chart-transaction-table-header-section[type="amount"]                         { width: 20%; min-width: 90px; }
          .chart-transaction-table-header-section[type="amount"]:hover                   { cursor: pointer; background-color: var(--color-slate-200); transition: background-color .2s ease-in-out; }
          .chart-transaction-table-header-section[type="category"]                       { width: 20%; min-width: 90px; }
          .chart-transaction-table-header-section[type="category"]:hover                 { cursor: pointer; background-color: var(--color-slate-200); transition: background-color .2s ease-in-out; }
          .chart-transaction-table-header-section[type="actions"]                        { width: 10%; justify-content: flex-end; min-width: 90px; }

          .chart-transaction-table-header-section p                                      { margin: 0; font-size: 1rem; line-height: 1; font-weight: 600; color: var(--color-slate-600); user-select: none; }

          .chart-transaction-table-body                                                  { width: 100%; max-height: 500px; overflow-y: auto; overflow-x: none; border-radius: 0 0 10px 10px; }
          .chart-transaction-table-body-row                                              { width: 100%; height: 50px; display: flex; align-items: center; border-bottom: 1px solid var(--color-slate-200); }
          .chart-transaction-table-body-row:hover                                        { background-color: var(--color-slate-50-faded-50); transition: background-color .2s ease-in-out; }
          .chart-transaction-table-body-row:last-child                                   { border-bottom: none; border-radius: 0 0 10px 10px; }
          .chart-transaction-table-body-row-section                                      { display: flex; align-items: center; padding: 0 15px; height: 100%; }
          .chart-transaction-table-body-row-section[type="date"]                         { width: 20%; min-width: 90px; }
          .chart-transaction-table-body-row-section[type="name"]                         { width: 30%; min-width: 150px; }
          .chart-transaction-table-body-row-section[type="amount"]                       { width: 20%; min-width: 90px; }
          .chart-transaction-table-body-row-section[type="category"]                     { width: 20%; min-width: 90px; }
          .chart-transaction-table-body-row-section[type="actions"]                      { width: 10%; justify-content: flex-end; gap: 10px; min-width: 90px; }
          .chart-transaction-table-body-row-section p                                    { margin: 0; font-size: .9rem; line-height: 1; color: var(--color-slate-600); }
          .chart-transaction-table-body-row-section p[type="positive"]                   { color: var(--color-emerald-600); }
          .chart-transaction-table-body-row-section p[type="negative"]                   { color: var(--color-red-600); }
          .chart-transaction-table-body-row-section-category-tag                         { font-size: .8rem; font-weight: 600; padding: 2px 7px; border-radius: 10px; background-color: var(--color-slate-100); color: var(--color-slate-600); }

          .chart-transaction-table-body-row-section-button                               { border-radius: 10px; padding: 5px; max-width: 15px; max-height: 15px; }
          .chart-transaction-table-body-row-section-button svg                           { height: 15px; width: 15px; }
          .chart-transaction-table-body-row-section-button[type="edit"]                  { background-color: var(--color-slate-50-faded-50); }
          .chart-transaction-table-body-row-section-button[type="edit"] svg              { fill: var(--color-slate-600); }
          .chart-transaction-table-body-row-section-button[type="edit"]:hover            { cursor: pointer; background-color: var(--color-slate-100) !important; transition: background-color .2s ease-in-out; }
          .chart-transaction-table-body-row-section-button[type="delete"]                { background-color: var(--color-red-50-faded-50); }
          .chart-transaction-table-body-row-section-button[type="delete"] svg            { fill: var(--color-red-600); }
          .chart-transaction-table-body-row-section-button[type="delete"]:hover          { cursor: pointer; background-color: var(--color-red-100) !important; transition: background-color .2s ease-in-out; }


          /* -------- Popup -------- */
          .popup-container                                                               { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 100; background-color: rgba(0, 0, 0, 0.5); display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
          .popup-object                                                                  { box-sizing: border-box; border-top: 4px solid var(--color-emerald-500); cursor: auto; width: 400px; max-width: 90%; background-color: var(--color-white); border-radius: 10px; padding: 25px; display: flex; flex-direction: column; gap: 15px; }
          .popup-header                                                                  { width: 100%; font-size: 22px; font-weight: 700; margin-bottom: 5px; color: var(--color-slate-600); display: flex; justify-content: space-between; align-items: center; }
          .popup-header svg                                                              { height: 20px; width: 20px; fill: var(--color-slate-600); border-radius: 10px; padding: 5px; cursor: pointer; }
          .popup-header svg:hover                                                        { background-color: var(--color-slate-100); transition: background-color .2s ease-in-out; }

          .popup-button-container                                                        { display: flex; justify-content: flex-end; gap: 5px; margin-top: 10px; }
          .popup-button                                                                  { user-select: none; padding: 8px 15px; border-radius: 10px; font-weight: 600; user-select: none; }
          .popup-button[type="positive"]                                                 { background-color: var(--color-emerald-600); color: var(--color-white); }
          .popup-button[type="positive"]:hover                                           { cursor: pointer; background-color: var(--color-emerald-500) !important; transition: background-color .2s ease-in-out; }
          .popup-button[type="neutral"]                                                  { background-color: var(--color-slate-100); color: var(--color-slate-600); }
          .popup-button[type="neutral"]:hover                                            { cursor: pointer; background-color: var(--color-slate-200) !important; transition: background-color .2s ease-in-out; }
          .popup-button[type="negative"]                                                 { background-color: var(--color-red-600); color: var(--color-white); }
          .popup-button[type="negative"]:hover                                           { cursor: pointer; background-color: var(--color-red-500) !important; transition: background-color .2s ease-in-out; }
          .popup-button[disabled]                                                        { cursor: not-allowed !important; opacity: 0.6; }
          .popup-button[type="positive"][disabled]:hover                                 { background-color: var(--color-emerald-600) !important; }
          .popup-button[type="neutral"][disabled]:hover                                  { background-color: var(--color-slate-100) !important; }
          .popup-button[type="negative"][disabled]:hover                                 { background-color: var(--color-red-600) !important; }


          .popup-object input[type="text"],
          .popup-object input[type="number"],
          .popup-object input[type="date"],
          .popup-object select                                                           { width: 100%; padding: 12px 15px; border-radius: 10px; border: 1px solid var(--color-slate-200); font-size: 15px; font-weight: 600; background: var(--color-white); box-sizing: border-box; box-shadow: none; }
          .popup-object label                                                            { display: block; margin: 0 0 5px; font-weight: 600; color: var(--color-slate-700); }
          .popup-object label sup                                                        { color: var(--color-red-600); }
          .popup-object input[error]                                                     { outline: 1px solid var(--color-red-600) !important; }
          .popup-object select[error]                                                    { outline: 1px solid var(--color-red-600) !important; }

          .popup-object input[type="text"]:focus,
          .popup-object input[type="number"]:focus,
          .popup-object input[type="date"]:focus,
          .popup-object select:focus                                                     { outline: none; border: 1px solid var(--color-slate-600); box-shadow: 0 0 0 3px var(--color-slate-50-faded-50); }
          .popup-object input::placeholder                                               { color: var(--color-slate-400); font-weight: 600; }

          .popup-object-input-container                                                  { display: flex; flex-direction: column; }
          .popup-object-input-container-row                                              { display: flex; gap: 10px; }


          /* -------- Pay Period Popup Specific -------- */
          .period-popup-more-button                                                     { user-select: none; width: fit-content; display: flex; gap: 2px; align-items: center; border-radius: 10px; padding: 5px 10px; }
          .period-popup-more-button:hover                                               { cursor: pointer; background-color: var(--color-emerald-100); transition: background-color .2s ease-in-out; }
          .period-popup-more-button p                                                   { margin: 0; line-height: 1; font-size: .9rem; font-weight: 600; color: var(--color-emerald-600); }
          .period-popup-more-button svg                                                 { height: 17px; width: 17px; fill: var(--color-emerald-600); }

          .period-popup-info-text                                                       { display: flex; padding: 0 0 0 5px; align-items: center; min-width: 50%; font-size: .9rem; font-weight: 600; color: var(--color-slate-600); line-height: 1; }

          .pay-period-error-text                                                        { font-size: .8rem; color: var(--color-red-600); font-weight: 600; }

          /* -------- Other Stuff -------- */
          .blur-container                                                               { backdrop-filter: blur(10px); position: fixed; top: 0; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; }
          .blur-container h1                                                            { color: var(--color-slate-600); font-size: 2rem; font-weight: 700; text-align: center; }

          /* -------- Responsive -------- */
          @media (max-width: 550px) {
              .navbar-container                                                          { height: 115px; flex-direction: column; align-items: center; justify-content: space-evenly; }
              .info-section-container                                                    { margin: 130px auto 0 auto; }
          }

          @media (max-width: 400px) {
              .chart-body-range-top-progress                                             { font-size: .7rem; }
          }
      </style>
  </head>

  <body>
    <div id="vueApp">
        <div class="blur-container" v-if="settings.monthlyIncome === 0">
            <h1>Please set your monthly income and savings goal to continue.</h1>
        </div>

        <div class="navbar-container">
            <div class="navbar-container-logo"></div>

            <div class="navbar-button-container">
                <div type="border" class="navbar-button" @click="payPeriodPopup.isOpen = true;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle></svg>

                    <p>Set Pay Period</p>
                </div>

                <div type="fill" class="navbar-button" @click="transactionPopup.type = 'add'; transactionPopup.isOpen = true; transactionPopup.transaction = { name: null, amount: null, date: null, category: '', type: 'negative' }">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"></path><path d="M12 5v14"></path></svg>

                    <p>Add Expense</p>
                </div>
            </div>
        </div>

        <div class="info-section-container">
            <div class="info-section-card">
                <div class="info-section-card-header-container">
                    <p>Total Budget</p>

                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8 2v4"></path><path d="M16 2v4"></path><rect width="18" height="18" x="3" y="4" rx="2"></rect><path d="M3 10h18"></path></svg>
                </div>

                <div class="info-section-card-data" type="positive">
                    ${{ getTotalBudget.toFixed(2) }}
                </div>
            </div>
            <div class="info-section-card">
                <div class="info-section-card-header-container">
                    <p>Total Monthly Spend</p>

                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--color-red-600)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 17 13.5 8.5 8.5 13.5 2 7"></polyline><polyline points="16 17 22 17 22 11"></polyline></svg>
                </div>

                <div class="info-section-card-data" type="negative">
                    ${{ getTotalSpend.toFixed(2) }}
                </div>
            </div>

            <div class="info-section-card">
                <div class="info-section-card-header-container">
                    <p>Total Savings</p>

                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--color-emerald-600)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-trending-up h-4 w-4 text-emerald-600"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"></polyline><polyline points="16 7 22 7 22 13"></polyline></svg>
                </div>

                <div class="info-section-card-data" type="positive">
                    ${{ (settings.monthlyIncome - getTotalBudget).toFixed(2) }}
                </div>
            </div>

            <div class="info-section-card">
                <div class="info-section-card-header-container">
                    <p>Net Income</p>

                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" x2="12" y1="2" y2="22"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>
                </div>

                <div class="info-section-card-data" type="positive">
                    ${{ (settings.monthlyIncome - getTotalSpend).toFixed(2) }}
                </div>
            </div>
        </div>

        <div class="charts-section-container">
            <div class="charts-section-card">
                <div class="charts-header">Budget Overview</div>

                <div class="chart-body" type="range">
                    <div class="chart-body-range-container" v-for="category in categories" :key="category.name">
                        <div class="chart-body-range-top">
                            <div class="chart-body-range-top-header-container">
                                <div class="chart-body-range-top-header">
                                    {{ category.name }}
                                </div>

                                <div class="chart-body-range-top-header-tag" :type="getStatusOfBudget(category)">
                                    {{ getStatusOfBudget(category) === 'positive' ? 'On Track' : getStatusOfBudget(category) === 'neutral' ? 'At Risk' : 'Over Budget' }}
                                </div>
                            </div>

                            <div class="chart-body-range-top-progress">
                                ${{ getAmountUsed(category).toFixed(2) }} / ${{ getBudgetCategoryWeight(category).toFixed(2) }}
                            </div>
                        </div>

                        <progress type="positive" :max="getBudgetCategoryWeight(category)" :value="getAmountUsed(category)" :type="getStatusOfBudget(category)"></progress>

                        <div class="chart-body-range-bottom">
                            <div class="chart-body-range-bottom-text">
                                {{ ((getAmountUsed(category) / getBudgetCategoryWeight(category)) * 100).toFixed(0) }}% used
                            </div>

                            <div class="chart-body-range-bottom-text">
                                ${{ getStatusOfBudget(category) === 'negative' ? 0 : (getBudgetCategoryWeight(category) - getAmountUsed(category)).toFixed(2) }} remaining
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="charts-section-card">
                <div class="charts-header">Top Spending Categories</div>

                <div class="chart-body">
                    <canvas ref="budgetChart"></canvas>
                </div>
            </div>
        </div>

        <div class="chart-transactions-container">
            <div class="chart-transactions-header">Recent Transactions</div>

            <div class="chart-transaction-table-container">
                <div class="chart-transaction-table-header">
                    <div class="chart-transaction-table-header-section" type="date" @click="sortTable('date')">
                        <p>Date</p>

                        <svg xmlns="http://www.w3.org/2000/svg" v-if="tableFilter.sortBy === 'date' && tableFilter.sortOrder === 'asc'" height="20px" viewBox="0 -960 960 960" width="24px" fill="var(--color-slate-600)"><path d="M440-160v-487L216-423l-56-57 320-320 320 320-56 57-224-224v487h-80Z"/></svg>
                        <svg xmlns="http://www.w3.org/2000/svg" v-else-if="tableFilter.sortBy === 'date' && tableFilter.sortOrder === 'desc'" height="20px" viewBox="0 -960 960 960" width="24px" fill="var(--color-slate-600)"><path d="M440-800v487L216-537l-56 57 320 320 320-320-56-57-224 224v-487h-80Z"/></svg>
                    </div>

                    <div class="chart-transaction-table-header-section" type="name" @click="sortTable('name')">
                        <p>Name</p>

                        <svg xmlns="http://www.w3.org/2000/svg" v-if="tableFilter.sortBy === 'name' && tableFilter.sortOrder === 'asc'" height="20px" viewBox="0 -960 960 960" width="24px" fill="var(--color-slate-600)"><path d="M440-160v-487L216-423l-56-57 320-320 320 320-56 57-224-224v487h-80Z"/></svg>
                        <svg xmlns="http://www.w3.org/2000/svg" v-else-if="tableFilter.sortBy === 'name' && tableFilter.sortOrder === 'desc'" height="20px" viewBox="0 -960 960 960" width="24px" fill="var(--color-slate-600)"><path d="M440-800v487L216-537l-56 57 320 320 320-320-56-57-224 224v-487h-80Z"/></svg>
                    </div>

                    <div class="chart-transaction-table-header-section" type="amount" @click="sortTable('amount')">
                        <p>Amount</p>

                        <svg xmlns="http://www.w3.org/2000/svg" v-if="tableFilter.sortBy === 'amount' && tableFilter.sortOrder === 'asc'" height="20px" viewBox="0 -960 960 960" width="24px" fill="var(--color-slate-600)"><path d="M440-160v-487L216-423l-56-57 320-320 320 320-56 57-224-224v487h-80Z"/></svg>
                        <svg xmlns="http://www.w3.org/2000/svg" v-else-if="tableFilter.sortBy === 'amount' && tableFilter.sortOrder === 'desc'" height="20px" viewBox="0 -960 960 960" width="24px" fill="var(--color-slate-600)"><path d="M440-800v487L216-537l-56 57 320 320 320-320-56-57-224 224v-487h-80Z"/></svg>
                    </div>

                    <div class="chart-transaction-table-header-section" type="category" @click="sortTable('category')">
                        <p>Category</p>

                        <svg xmlns="http://www.w3.org/2000/svg" v-if="tableFilter.sortBy === 'category' && tableFilter.sortOrder === 'asc'" height="20px" viewBox="0 -960 960 960" width="24px" fill="var(--color-slate-600)"><path d="M440-160v-487L216-423l-56-57 320-320 320 320-56 57-224-224v487h-80Z"/></svg>
                        <svg xmlns="http://www.w3.org/2000/svg" v-else-if="tableFilter.sortBy === 'category' && tableFilter.sortOrder === 'desc'" height="20px" viewBox="0 -960 960 960" width="24px" fill="var(--color-slate-600)"><path d="M440-800v487L216-537l-56 57 320 320 320-320-56-57-224 224v-487h-80Z"/></svg>
                    </div>

                    <div class="chart-transaction-table-header-section" type="actions">
                        <p>Actions</p>
                    </div>
                </div>

                <div class="chart-transaction-table-body">
                    <div class="chart-transaction-table-body-row" v-for="transaction in getTransactions" :key="transaction.name + transaction.date + transaction.amount">
                        <div class="chart-transaction-table-body-row-section" type="date">
                            <p>{{ new Date(transaction.date).toLocaleDateString() }}</p>
                        </div>

                        <div class="chart-transaction-table-body-row-section" type="name">
                            <p>{{ transaction.name }}</p>
                        </div>

                        <div class="chart-transaction-table-body-row-section" type="amount">
                            <p :type="transaction.type">${{ transaction.amount.toFixed(2) }}</p>
                        </div>

                        <div class="chart-transaction-table-body-row-section" type="category">
                            <div class="chart-transaction-table-body-row-section-category-tag">{{ transaction.category }}</div>
                        </div>

                        <div class="chart-transaction-table-body-row-section" type="actions">
                            <div class="chart-transaction-table-body-row-section-button" type="edit" @click="transactionPopup.type = 'edit'; transactionPopup.isOpen = true; transactionPopup.transaction = { ...transaction }, transactionPopup.oldTransaction = { ...transaction }">
                                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"/></svg>
                            </div>

                            <div class="chart-transaction-table-body-row-section-button" type="delete" @click="deleteTransaction(transaction)">
                                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"/></svg>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>


        <popup_transaction v-if="transactionPopup.isOpen"></popup_transaction>
        <popup_pay-period v-if="payPeriodPopup.isOpen"></popup_pay-period>
    </div>
  </body>

  <script>
      Vue.component('popup_transaction', {
          template: `
                <div class="popup-container">
                  <div class="popup-object">
                    <div class="popup-header">
                      {{ transactionPopupTitle }}
<!--                      <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg>-->
                    </div>

                    <div class="popup-object-input-container">
                      <label for="transaction-name">Name <sup>*</sup></label>
                      <input id="transaction-name" type="text" v-model="transactionPopup.transaction.name" placeholder="e.g., Groceries, Rent, etc." :error="transactionPopup.transaction.name == null || transactionPopup.transaction.name.trim() === ''" />
                    </div>

                    <div class="popup-object-input-container">
                      <label for="transaction-amount">Amount <sup>*</sup></label>
                      <div class="popup-object-input-container-row">
                        <select v-model="transactionPopup.transaction.type" id="transaction-type" style="width: fit-content;">
                          <option value="negative">-</option>
                          <option value="positive">+</option>
                        </select>

                        <input id="transaction-amount" type="number" v-model.number="transactionPopup.transaction.amount" placeholder="e.g., 50.00" :error="transactionPopup.transaction.amount == null || isNaN(transactionPopup.transaction.amount) || transactionPopup.transaction.amount <= 0" />
                      </div>
                    </div>

                    <div class="popup-object-input-container">
                      <label for="transaction-category">Category <sup>*</sup></label>
                        <select v-model="transactionPopup.transaction.category" id="transaction-category" :error="transactionPopup.transaction.category === ''">
                            <option disabled value="">Select a category</option>
                            <option v-for="category in $root.categories" :key="category.name" :value="category.name">{{ category.name }}</option>
                        </select>
                    </div>

                    <div class="popup-object-input-container">
                      <label for="transaction-date">Date <sup>*</sup></label>
                      <input id="transaction-date" type="date" v-model="transactionPopup.transaction.date" :min="dateMin" :max="dateMax" :error="transactionPopup.transaction.date == null || transactionPopup.transaction.date === ''" />
                    </div>

                    <div class="popup-button-container">
                        <div class="popup-button" type="neutral" @click="close()">Cancel</div>
                        <div class="popup-button" type="positive" :disabled="!canSave" @click="saveChanges" v-if="transactionPopup.type === 'add'">Add</div>
                        <div class="popup-button" type="positive" :disabled="!canSave" @click="saveChanges" v-else>Save</div>
                    </div>
                  </div>
                </div>
            `,
          data() {
              return {
                  dateMin: new Date(new Date().getFullYear(), new Date().getMonth(), 1).toISOString().split('T')[0],
                  dateMax: new Date(new Date().getFullYear(), new Date().getMonth() + 1, 0).toISOString().split('T')[0]
              }
          },
          methods: {
              saveChanges() {
                  if (!this.canSave) return;

                  switch (this.transactionPopup.type) {
                        case 'add':
                            if (this.$root.categories.some(c => c.name === this.transactionPopup.transaction.category)) {
                                const category = this.$root.categories.find(c => c.name === this.transactionPopup.transaction.category);
                                category.transactions.push(this.transactionPopup.transaction);
                            } else {
                                alert('Error: Selected category does not exist.');
                                return;
                            }
                            break;
                        case 'edit':
                            if (this.$root.categories.some(c => c.name === this.transactionPopup.oldTransaction.category)) {
                                const oldCategory = this.$root.categories.find(c => c.name === this.transactionPopup.oldTransaction.category);
                                const transactionIndex = oldCategory.transactions.findIndex(t => t.name === this.transactionPopup.oldTransaction.name && t.date === this.transactionPopup.oldTransaction.date && t.amount === this.transactionPopup.oldTransaction.amount);

                                if (transactionIndex !== -1) {
                                    // If category has changed, remove from old and add to new
                                    if (this.transactionPopup.transaction.category !== this.transactionPopup.oldTransaction.category) {
                                        oldCategory.transactions.splice(transactionIndex, 1);

                                        if (this.$root.categories.some(c => c.name === this.transactionPopup.transaction.category)) {
                                            const newCategory = this.$root.categories.find(c => c.name === this.transactionPopup.transaction.category);
                                            newCategory.transactions.push(this.transactionPopup.transaction);
                                        } else {
                                            alert('Error: Selected category does not exist.');
                                            return;
                                        }
                                    } else {
                                        // Update in the same category
                                        oldCategory.transactions.splice(transactionIndex, 1, this.transactionPopup.transaction);
                                    }
                                } else {
                                    alert('Error: Original transaction not found.');
                                    return;
                                }
                            } else {
                                alert('Error: Original category does not exist.');
                                return;
                            }
                            break;
                        default:
                            break;
                  }

                  this.transactionPopup.isOpen = false;
                  this.transactionPopup.transaction = { name: null, amount: null, date: null, category: '', type: 'negative' };
                  this.transactionPopup.type = null;
                  this.$root.saveData();
              },

              close() {
                    if (this.hasMadeChanges) {
                        if (!confirm('You have unsaved changes. Are you sure you want to close?')) {
                            return;
                        }
                    }

                  this.transactionPopup.isOpen = false;
                  this.transactionPopup.transaction = { name: null, amount: null, date: null, category: '', type: 'negative' };
                  this.transactionPopup.type = null;
              }
          },
          computed: {
              canSave() {
                  let canSave = true;

                  if (!this.hasMadeChanges) {
                      canSave = false;
                  }

                  return canSave;
              },
              transactionPopup() {
                  return this.$root.transactionPopup;
              },
              transactionPopupTitle() {
                  return this.transactionPopup.type === 'add' ? 'Add Transaction' : 'Edit Transaction';
              },
              hasMadeChanges() {
                  switch (this.transactionPopup.type) {
                        case 'add':
                            return this.transactionPopup.transaction.name != null ||
                                this.transactionPopup.transaction.amount != null ||
                                this.transactionPopup.transaction.date != null ||
                                this.transactionPopup.transaction.category !== '';
                      case 'edit':
                            return this.transactionPopup.transaction.name !== this.transactionPopup.oldTransaction.name ||
                                this.transactionPopup.transaction.amount !== this.transactionPopup.oldTransaction.amount ||
                                this.transactionPopup.transaction.date !== this.transactionPopup.oldTransaction.date ||
                                this.transactionPopup.transaction.type !== this.transactionPopup.oldTransaction.type ||
                                this.transactionPopup.transaction.category !== this.transactionPopup.oldTransaction.category;
                        default:
                            return false;
                  }
              }
          }
      });

      Vue.component('popup_pay-period', {
          template: `
                <div class="popup-container">
                  <div class="popup-object">
                    <div class="popup-header">
                      Set Pay Period
<!--                      <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg>-->
                    </div>

                    <div class="popup-object-input-container">
                      <label for="monthly-income">Monthly Income <sup>*</sup></label>
                      <input type="number" v-model="payPeriodPopup.monthlyIncome" placeholder="e.g., 5000.00" :error="isNaN(payPeriodPopup.monthlyIncome) || payPeriodPopup.monthlyIncome <= 0" />
                    </div>

                    <div class="popup-object-input-container">
                      <label for="savings-percentage">Percent to Save</label>
                      <input type="number" v-model="payPeriodPopup.savingsPercentage" placeholder="e.g., 20" :error="isNaN(payPeriodPopup.savingsPercentage) || payPeriodPopup.savingsPercentage < 0 || payPeriodPopup.savingsPercentage > 100" />
                    </div>

                    <div class="period-popup-more-button" @click="weightsOpen = !weightsOpen">
                      <p>Advanced Options</p>

                      <svg xmlns="http://www.w3.org/2000/svg" v-if="!weightsOpen" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M480-344 240-584l56-56 184 184 184-184 56 56-240 240Z"/></svg>
                      <svg xmlns="http://www.w3.org/2000/svg" v-else height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M480-528 296-344l-56-56 240-240 240 240-56 56-184-184Z"/></svg>
                    </div>

                    <template v-if="weightsOpen" v-for="weight in payPeriodPopup.weights" :key="weight.name">
                      <div class="popup-object-input-container-row">
                        <div class="period-popup-info-text">
                          {{ weight.name }}
                        </div>

                        <input type="number" v-model.number="weight.weight" />
                      </div>
                    </template>

                    <div class="pay-period-error-text" v-if="payPeriodPopup.weights.reduce((total, weight) => total + weight.weight, 0) !== 100">
                      Category weights must add up to 100%.
                    </div>

                    <div class="popup-button-container">
                        <div class="popup-button" type="neutral" @click="close">Cancel</div>
                        <div class="popup-button" type="positive" @click="saveChanges()" :disabled="!canSave">Save</div>
                    </div>
                  </div>
                </div>
          `,
          data() {
              return {
                  weightsOpen: false
              }
          },
          methods: {
              close() {
                  if (this.hasMadeChanges) {
                      if (!confirm('You have unsaved changes. Are you sure you want to close?')) {
                          return;
                      }
                  }

                  this.payPeriodPopup.isOpen = false;
                  this.payPeriodPopup.monthlyIncome = this.$root.settings.monthlyIncome;
                  this.payPeriodPopup.savingsPercentage = this.$root.settings.savingsPercentage;
              },

              saveChanges() {
                  if (!this.hasMadeChanges) return;

                  if (isNaN(this.payPeriodPopup.monthlyIncome) || this.payPeriodPopup.monthlyIncome <= 0) {
                      alert('Please enter a valid monthly income.');
                      return;
                  }

                  if (isNaN(this.payPeriodPopup.savingsPercentage) || this.payPeriodPopup.savingsPercentage < 0 || this.payPeriodPopup.savingsPercentage > 100) {
                      alert('Please enter a valid savings percentage (0-100).');
                      return;
                  }

                  if (this.payPeriodPopup.weights.reduce((total, weight) => total + weight.weight, 0) !== 100) {
                      alert('Category weights must add up to 100%.');
                      return;
                  }

                  this.$root.settings.monthlyIncome = Number(this.payPeriodPopup.monthlyIncome);
                  this.$root.settings.savingsPercentage = Number(this.payPeriodPopup.savingsPercentage);
                  this.payPeriodPopup.weights.forEach(weight => {
                      const category = this.$root.categories.find(c => c.name === weight.name);
                      if (category) {
                          category.weight = weight.weight;
                      }
                  });

                  this.payPeriodPopup.isOpen = false;
                  this.$root.saveData();
              }
          },
          computed: {
              canSave() {
                  let canSave = true;

                  if (!this.hasMadeChanges) {
                      canSave = false;
                  }

                  if (isNaN(this.payPeriodPopup.monthlyIncome) || this.payPeriodPopup.monthlyIncome <= 0) {
                      canSave = false;
                  }

                  if (isNaN(this.payPeriodPopup.savingsPercentage) || this.payPeriodPopup.savingsPercentage < 0 || this.payPeriodPopup.savingsPercentage > 100) {
                      canSave = false;
                  }

                  if (this.payPeriodPopup.weights.reduce((total, weight) => total + weight.weight, 0) !== 100) {
                      canSave = false;
                  }

                  return canSave;
              },
              payPeriodPopup() {
                  return this.$root.payPeriodPopup;
              },

              hasMadeChanges() {
                  const settingsChanged = this.payPeriodPopup.monthlyIncome !== this.$root.settings.monthlyIncome ||
                      this.payPeriodPopup.savingsPercentage !== this.$root.settings.savingsPercentage;

                  let weightsChanged = false;

                  for (let i = 0; i < this.payPeriodPopup.weights.length; i++) {
                      const category = this.$root.categories.find(c => c.name === this.payPeriodPopup.weights[i].name);
                      if (category && category.weight !== this.payPeriodPopup.weights[i].weight) {
                          weightsChanged = true;
                          break;
                      }
                  }

                  return settingsChanged || weightsChanged;
              }
          },
          mounted() {
              this.$set(this.payPeriodPopup, 'monthlyIncome', this.$root.settings.monthlyIncome);
              this.$set(this.payPeriodPopup, 'savingsPercentage', this.$root.settings.savingsPercentage);

              if (!Array.isArray(this.payPeriodPopup.weights)) {
                  this.$set(this.payPeriodPopup, 'weights', []);
              }
              this.payPeriodPopup.weights.splice(
                  0, this.payPeriodPopup.weights.length,
                  ...this.$root.categories.map(c => ({ name: c.name, weight: c.weight }))
              );
          }
      });

      const app = new Vue({
          el: '#vueApp',
          data() {
              return {
                  spendingChart: null,

                  transactionPopup: {
                      isOpen: false,
                      type: null, // 'add' or 'edit'
                      transaction: {
                          name: null,
                          amount: null,
                          date: null,
                          category: '',
                          type: 'negative'
                      },
                      oldTransaction: null
                  },

                  payPeriodPopup: {
                      isOpen: false,

                      settings: {
                          monthlyIncome: null,
                          savingsPercentage: null
                      },

                      weights: []

                  },

                  settings: {
                      monthlyIncome: 0,
                      savingsPercentage: 0
                  },

                  tableFilter: {
                      sortBy: 'date',
                      sortOrder: 'desc'
                  },

                  categories: [
                          {
                              name: 'Auto & Transport',
                              color: '#0072B2',
                              weight: 20,
                              transactions: [],
                          },
                          {
                              name: 'Dining & Drinks',
                              color: '#E69F00',
                              weight: 12,
                              transactions: []
                          },
                          {
                              name: 'Shopping',
                              color: '#D55E00',
                              weight: 15,
                              transactions: []
                          },
                          {
                              name: 'Subscriptions',
                              color: '#56B4E9',
                              weight: 8,
                              transactions: []
                          },
                          {
                              name: 'Entertainment & Rec.',
                              color: '#CC79A7',
                              weight: 10,
                              transactions: []
                          },
                          {
                              name: 'Groceries',
                              color: '#009E73',
                              weight: 30,
                              transactions: []
                          },
                          {
                              name: 'Uncategorized',
                              color: 'gray',
                              weight: 5,
                              transactions: []
                          }
                  ]
              }
          },
          methods: {
              getStatusOfBudget(category) {
                  const percentageUsed = (this.getAmountUsed(category) / this.getBudgetCategoryWeight(category)) * 100;

                  if (percentageUsed < 75) {
                      return 'positive';
                  } else if (percentageUsed >= 75 && percentageUsed < 100) {
                      return 'neutral';
                  } else {
                      return 'negative';
                  }
              },
              getAmountUsed(category) {
                  return category.transactions.reduce((total, transaction) => (new Date(transaction.date)).getMonth() === (new Date()).getMonth() ? transaction.type === 'negative' ? total + transaction.amount : total - transaction.amount : 0, 0);
              },
              getBudgetCategoryWeight(category) {
                  const totalWeight = this.categories.reduce((total, cat) => total + cat.weight, 0);
                  return (category.weight / totalWeight) * this.getTotalBudget;
              },

              deleteTransaction(transaction) {
                  const category = this.categories.find(c => c.name === transaction.category);
                  if (category) {
                      const transactionIndex = category.transactions.findIndex(t => t.name === transaction.name && t.date === transaction.date && t.amount === transaction.amount);
                      if (transactionIndex !== -1) {
                          if (confirm('Are you sure you want to delete this transaction?')) {
                              category.transactions.splice(transactionIndex, 1);
                              this.saveData();
                          }
                      } else {
                          alert('Error: Transaction not found.');
                      }
                    } else {
                        alert('Error: Category not found.');
                  }
              },

              sortTable(category) {
                  if (this.tableFilter.sortBy === category) {
                      if (this.tableFilter.sortOrder === 'asc') {
                          this.tableFilter.sortOrder = 'desc';
                      } else {
                          this.tableFilter.sortOrder = 'asc';
                      }
                  }else {
                      this.tableFilter.sortBy = category;
                      this.tableFilter.sortOrder = 'asc';
                  }
              },
              saveData() {
                  const data = {
                      settings: this.settings,
                      categories: this.categories
                  }

                  localStorage.setItem('budgetAppData', JSON.stringify(data));

                  this.$nextTick(() => this.$root.initChart && this.$root.initChart());
              },
              initChart() {
                  if (this.spendingChart) {
                      try { this.spendingChart.destroy(); } catch (e) {}
                  }
                  const ctx = this.$refs.budgetChart.getContext('2d'); // gawr gura approves refs
                  this.spendingChart = new Chart(ctx, {
                      type: 'doughnut',
                      data: {
                          labels: this.categories.map(c => c.name),
                          datasets: [{
                              label: 'Spending by Category',
                              data: this.categories.map(c => this.getAmountUsed(c)),
                              backgroundColor: this.categories.map(c => c.color),
                              hoverOffset: 4
                          }]
                      },
                      options: { responsive: true, maintainAspectRatio: false }
                  });
              }
          },
          computed: {
              getTotalSpend() {
                  return this.categories.reduce((total, category) => total + this.getAmountUsed(category), 0);
              },
              getTransactions() {
                  let allTransactions = [];

                  this.categories.forEach(category => {
                      allTransactions = allTransactions.concat(category.transactions.map(transaction => ({ ...transaction, category: category.name })));
                  });

                  allTransactions = allTransactions.filter(transaction => {
                      const transactionDate = new Date(transaction.date);
                      const now = new Date();

                      return transactionDate.getMonth() === now.getMonth() && transactionDate.getFullYear() === now.getFullYear();
                  })

                  switch (this.tableFilter.sortBy) {
                      case 'name':
                          allTransactions.sort((a, b) => this.tableFilter.sortOrder === 'asc' ? a.name.localeCompare(b.name) : b.name.localeCompare(a.name));
                          break;
                      case 'amount':
                          allTransactions.sort((a, b) => this.tableFilter.sortOrder === 'asc' ? a.amount - b.amount : b.amount - a.amount);
                          break;
                      case 'date':
                          allTransactions.sort((a, b) => this.tableFilter.sortOrder === 'asc' ? new Date(a.date) - new Date(b.date) : new Date(b.date) - new Date(a.date));
                          break;
                      case 'category':
                          allTransactions.sort((a, b) => this.tableFilter.sortOrder === 'asc' ? a.category.localeCompare(b.category) : b.category.localeCompare(a.category));
                          break;
                  }

                  return allTransactions;
              },

              getTransactionType() {
                    return this.transactionPopup.transaction.amount >= 0 ? 'positive' : 'negative';
              },

              getTotalBudget() {
                  return this.settings.monthlyIncome * (1 - this.settings.savingsPercentage / 100);
              }
          },
          watch: {
              categories: {
                  handler() {
                      if (this.spendingChart) {
                          this.$nextTick(() => this.initChart())
                      }
                  },
                  deep: true
              }
          },
          mounted() {
              if (localStorage.getItem('budgetAppData')) {
                  const data = JSON.parse(localStorage.getItem('budgetAppData'));
                  this.settings = data.settings;
                  this.categories = data.categories;
              }

              this.$nextTick(() => this.initChart());
          }
      });
  </script>
</html>